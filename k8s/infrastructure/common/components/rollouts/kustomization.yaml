apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
- analysis-template.yaml

components:
- rollout-pattern.yaml

vars:
- name: SERVICE_NAME
  objref:
    kind: Rollout
    name: base-rollout
    apiVersion: argoproj.io/v1alpha1
  fieldref:
    fieldpath: metadata.name
- name: VS_NAME
  objref:
    kind: Rollout
    name: base-rollout
    apiVersion: argoproj.io/v1alpha1
  fieldref:
    fieldpath: metadata.name