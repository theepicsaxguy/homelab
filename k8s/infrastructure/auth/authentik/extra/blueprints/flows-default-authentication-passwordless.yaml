# Schema validation disabled - Authentik blueprints use custom YAML tags incompatible with JSON schema
# yamllint disable
# prettier-ignore
# eslint-disable
# yaml-language-server: $schema=https://goauthentik.io/blueprints/schema.json
---
version: 1
metadata:
  name: Flows - Default Authentication with Passwordless
entries:
  # Update the default identification stage to link to passwordless flow
  - model: authentik_stages_identification.identificationstage
    state: present
    identifiers:
      name: default-authentication-identification
    attrs:
      user_fields:
        - email
        - username
      passwordless_flow: !Find [
        authentik_flows.flow,
        [slug, passwordless-authentication-flow]
      ]
      sources: []
      show_matched_user: true
      show_source_labels: false
      case_insensitive_matching: true
      enrollment_flow: !Find [
        authentik_flows.flow,
        [slug, default-enrollment-flow]
      ]
      recovery_flow: !Find [
        authentik_flows.flow,
        [slug, default-recovery-flow]
      ]
