apiVersion: velero.io/v1
kind: Schedule
metadata:
  name: velero-weekly-offsite-n8n
  namespace: velero
  labels:
    backup-tier: weekly-offsite
    backup-app: n8n
spec:
  schedule: "0 3 * * 6"
  template:
    includedNamespaces:
      - n8n
    orLabelSelectors:
      - matchLabels:
          app.kubernetes.io/name: n8n
    includedResources:
      - '*'
    excludedResources:
      - events
      - events.events.k8s.io
      - backups.velero.io
      - restores.velero.io
      - backuprepositories.velero.io
      - podvolumebackups.velero.io
      - podvolumerestores.velero.io
      - endpoints
      - endpointslices.discovery.k8s.io
      - leases.coordination.k8s.io
    defaultVolumesToFsBackup: true
    storageLocation: backblaze-b2
    ttl: 2160h
    includeClusterResources: false
