# yaml-language-server: $schema=https://goauthentik.io/blueprints/schema.json
# yamllint disable-file
# prettier-ignore-start
# eslint-disable
---
version: 1
metadata:
  name: Users
entries:
  - id: !Env ADMIN_USERNAME
    model: authentik_core.user
    identifiers:
      username: !Env ADMIN_USERNAME
    attrs:
      username: !Env ADMIN_USERNAME
      name: !Env ADMIN_NAME
      email: !Env ADMIN_EMAIL
      groups:
        # admin-level groups
        - !Find [authentik_core.group, [name, "ArgoCD Admins"]]
        - !Find [authentik_core.group, [name, "Grafana Admins"]]
        # membership in every user group
        - !Find [authentik_core.group, [name, "ArgoCD Viewers"]]
        - !Find [authentik_core.group, [name, "Grafana Users"]]
        - !Find [authentik_core.group, [name, "Frigate Users"]]
        - !Find [authentik_core.group, [name, "Home Assistant Users"]]
        - !Find [authentik_core.group, [name, "Immich Users"]]
        - !Find [authentik_core.group, [name, "Jellyfin Users"]]
        - !Find [authentik_core.group, [name, "Media Users"]]
        - !Find [authentik_core.group, [name, "Open WebUI Users"]]
        - !Find [authentik_core.group, [name, "Karakeep Users"]]
        - !Find [authentik_core.group, [name, "Kubectl Users"]]
        - !Find [authentik_core.group, [name, "Litellm Admins"]]
        - !Find [authentik_core.group, [name, "Litellm Users"]]

  - id: !Env USER_USERNAME
    model: authentik_core.user
    identifiers:
      username: !Env USER_USERNAME
    attrs:
      username: !Env USER_USERNAME
      name: !Env USER_NAME
      email: !Env USER_EMAIL
      groups:
        - !Find [authentik_core.group, [name, "ArgoCD Viewers"]]
        - !Find [authentik_core.group, [name, "Grafana Users"]]
        - !Find [authentik_core.group, [name, "Frigate Users"]]
        - !Find [authentik_core.group, [name, "Home Assistant Users"]]
        - !Find [authentik_core.group, [name, "Immich Users"]]
        - !Find [authentik_core.group, [name, "Jellyfin Users"]]
        - !Find [authentik_core.group, [name, "Media Users"]]
        - !Find [authentik_core.group, [name, "Open WebUI Users"]]
        - !Find [authentik_core.group, [name, "Karakeep Users"]]
        - !Find [authentik_core.group, [name, "Kubectl Users"]]
        - !Find [authentik_core.group, [name, "Litellm Users"]]
