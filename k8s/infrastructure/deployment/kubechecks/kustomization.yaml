apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
namespace: kubechecks

resources:
  - namespace.yaml
  - kubechecks-secret-external.yaml
  - ca-secret.yaml
  - k8s-secret-store.yaml
  - http-route.yaml
  - pdb.yaml

helmCharts:
  - name: kubechecks
    repo: https://zapier.github.io/kubechecks
    version: 0.5.5
    releaseName: kubechecks
    namespace: kubechecks
    valuesFile: values.yaml

patches:
  - target:
      kind: Deployment
      name: kubechecks
      namespace: kubechecks
    path: patch-ca-mount.yaml

generatorOptions:
  disableNameSuffixHash: true
