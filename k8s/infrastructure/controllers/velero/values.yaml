upgradeCRDs: false
deployNodeAgent: true
snapshotsEnabled: false
initContainers:
  - name: velero-plugin-for-aws
    image: velero/velero-plugin-for-aws:v1.13.2
    imagePullPolicy: IfNotPresent
    volumeMounts:
      - mountPath: /target
        name: plugins
rbac:
  create: true
  clusterAdministrator: true
serviceAccount:
  server:
    create: true
credentials:
  useSecret: true
  existingSecret: velero-minio-credentials
configuration:
  uploaderType: kopia
  uploaderConfig:
    parallelFilesUpload: 2
  backupRepositoryConfigMap: velero-repository-config
  repoMaintenanceJobConfigMap: velero-repo-maintenance-job-config
  backupStorageLocation:
    - name: default
      provider: aws
      bucket: velero
      default: true
      config:
        region: us-west-1
        s3ForcePathStyle: "true"
        s3Url: https://truenas.peekoff.com:9000
  repositoryMaintenanceJob:
    repositoryConfigData:
      name: "velero-repo-maintenance"
      global:
        keepLatestMaintenanceJobs: 3
        podResources:
          cpuRequest: "100m"
          cpuLimit: "200m"
          memoryRequest: "128Mi"
          memoryLimit: "256Mi"
        podSecurityContext:
          runAsNonRoot: true
          runAsUser: 65534
          runAsGroup: 65534
          fsGroup: 65534
          seccompProfile:
            type: RuntimeDefault
        containerSecurityContext:
          allowPrivilegeEscalation: false
          capabilities:
            drop:
              - ALL
          readOnlyRootFilesystem: true
resources:
  requests:
    cpu: 200m
    memory: 256Mi
  limits:
    cpu: 500m
    memory: 512Mi
nodeAgent:
  tolerations:
    - key: "gpu"
      operator: "Equal"
      value: "true"
      effect: "NoSchedule"
metrics:
  enabled: true
  serviceMonitor:
    enabled: true
