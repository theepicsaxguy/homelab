# 2) values.yaml: reference that Secret everywhere
authentik:
  # inject the secret_key via env instead of file
  env:
    - name: AUTHENTIK_SECRET_KEY
      valueFrom:
        secretKeyRef:
          name: authentik-combined-secret
          key: secret_key
  bootstrap:
    password: ""    # leave blank – we’ll also env‑mount below
    token: ""
    email: ""       # optional, you can skip if not using bootstrap
  # inject bootstrap secrets via env
  envFrom:
    - secretRef:
        name: authentik-combined-secret

# Bitnami PostgreSQL sub‑chart
postgresql:
  enabled: true
  auth:
    existingSecret: authentik-combined-secret
    secretKeys:
      adminPasswordKey: postgresql_password

# Bitnami Redis sub‑chart
redis:
  enabled: true
  auth:
    existingSecret: authentik-combined-secret
    existingSecretPasswordKey: redis_password
    usePasswordFile: false
