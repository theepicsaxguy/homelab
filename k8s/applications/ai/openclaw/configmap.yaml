apiVersion: v1
kind: ConfigMap
metadata:
  name: openclaw-config
  namespace: openclaw
  labels:
    app.kubernetes.io/name: openclaw
data:
  openclaw.json: |
    {
      "identity": {
        "name": "Samantha",
        "theme": "helpful sloth",
        "emoji": "ðŸ¦¥"
      },
      "logging": {
        "level": "info",
        "file": "/var/log/openclaw/openclaw.log",
        "consoleLevel": "info",
        "consoleStyle": "pretty",
        "redactSensitive": "tools"
      },
      "messages": {
        "messagePrefix": "[openclaw]",
        "responsePrefix": ">",
        "ackReaction": "ðŸ‘€",
        "ackReactionScope": "group-mentions"
      },
      "routing": {
        "groupChat": {
          "mentionPatterns": ["@openclaw", "openclaw"],
          "historyLimit": 50
        },
        "queue": {
          "mode": "collect",
          "debounceMs": 1000,
          "cap": 20,
          "drop": "summarize"
        }
      },
      "session": {
        "scope": "per-sender",
        "reset": {
          "mode": "daily",
          "atHour": 4,
          "idleMinutes": 60
        },
        "resetTriggers": ["/new", "/reset"],
        "store": "~/.openclaw/agents/default/sessions/sessions.json",
        "typingIntervalSeconds": 5
      },
      "channels": {
        "slack": {
          "enabled": true,
          "botToken": "${SLACK_BOT_TOKEN}",
          "appToken": "${SLACK_APP_TOKEN}",
          "channels": {
            "#general": { "allow": true, "requireMention": true }
          },
          "dm": { "enabled": true, "allowFrom": ["U123"] },
          "slashCommand": {
            "enabled": true,
            "name": "openclaw",
            "sessionPrefix": "slack:slash",
            "ephemeral": true
          }
        }
      },
      "agents": {
        "defaults": {
          "workspace": "/workspace",
          "userTimezone": "America/Chicago",
          "model": {
            "provider": "litellm",
            "model": "claude-sonnet-4-20250514"
          },
          "thinkingDefault": "low",
          "verboseDefault": "off",
          "elevatedDefault": "on",
          "timeoutSeconds": 600,
          "typingIntervalSeconds": 5,
          "maxConcurrent": 3,
          "sandbox": {
            "mode": "non-main",
            "perSession": true,
            "workspaceRoot": "~/.openclaw/sandboxes",
            "docker": {
              "image": "openclaw-sandbox:bookworm-slim",
              "workdir": "/workspace",
              "readOnlyRoot": true,
              "tmpfs": ["/tmp", "/var/tmp", "/run"],
              "network": "none",
              "user": "1000:1000"
            },
            "browser": { "enabled": false }
          }
        }
      },
      "tools": {
        "allow": ["exec", "process", "read", "write", "edit", "apply_patch"],
        "deny": ["browser", "canvas"],
        "exec": {
          "backgroundMs": 10000,
          "timeoutSec": 1800,
          "cleanupMs": 1800000
        },
        "elevated": {
          "enabled": true,
          "allowFrom": {
            "whatsapp": ["+15555550123"],
            "telegram": ["123456789"],
            "discord": ["steipete"],
            "slack": ["U123"],
            "signal": ["+15555550123"],
            "imessage": ["user@example.com"],
            "webchat": ["session:demo"]
          }
        }
      },
      "models": {
        "mode": "merge",
        "providers": {
          "litellm": {
            "api": "openai",
            "baseUrl": "http://litellm.litellm.svc.cluster.local:4000/v1",
            "apiKey": "${LITELLM_API_KEY}"
          }
        }
      },
       "gateway": {
         "mode": "local",
         "port": 18789,
         "bind": "lan",
         "controlUi": { "enabled": true, "basePath": "/openclaw", "dangerouslyDisableDeviceAuth": true },
         "auth": {
           "mode": "token",
           "token": "${OPENCLAW_GATEWAY_TOKEN}",
           "allowTailscale": true
         }
       }
    }
