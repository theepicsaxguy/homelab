apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
namespace: auth
resources:
  - externalsecret.yaml
  - database.yaml

configMapGenerator:
  - name: authentik-blueprints
    files:
      - blueprints/flows-authenticator-email-setup.yaml
      - blueprints/flows-enrollment-2-stage.yaml
      - blueprints/flows-enrollment-email-verification.yaml
      - blueprints/flows-login-2fa.yaml
      - blueprints/flows-login-conditional-captcha.yaml
      - blueprints/flows-recovery-email-verification.yaml
      - blueprints/flows-unenrollment.yaml
      - blueprints/sources-google-ldap-mappings.yaml

generatorOptions:
  disableNameSuffixHash: true

helmCharts:
  - name: authentik
    repo: https://charts.goauthentik.io
    version: 2025.4.0
    releaseName: authentik
    namespace: auth
    valuesFile: values.yaml
    valuesInline:
      blueprints:
        enabled: true
        configMapName: authentik-blueprints


