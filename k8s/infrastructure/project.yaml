apiVersion: argoproj.io/v1alpha1
kind: AppProject
metadata:
  name: infrastructure
  namespace: argocd
  labels:
    app.kubernetes.io/part-of: infrastructure
spec:
  description: Core infrastructure components managed through GitOps

  sourceRepos:
    - '*'  # <=== Allows all repositories

  destinations:
    - namespace: '*'  # <=== Allows deployment to ANY namespace
      server: '*'  # <=== Allows deployment to ANY cluster

  clusterResourceWhitelist:
    - group: '*'  # <=== Allows ALL cluster-wide resources
      kind: '*'  

  namespaceResourceWhitelist:
    - group: '*'  # <=== Allows ALL namespaced resources
      kind: '*'  

  syncWindows:
    - kind: allow
      schedule: '* * * * *'
      duration: 24h
      applications:
        - '*'
      manualSync: true

  orphanedResources:
    warn: true