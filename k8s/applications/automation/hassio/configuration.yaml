# Loads default set of integrations. Do not remove.
default_config:

# Include secrets for use in other configurations
secrets: !include secrets.yaml

# Load frontend themes from the themes folder
frontend:
  themes: !include_dir_merge_named themes
  extra_module_url:
    - /hacsfiles/lovelace-card-mod/card-mod.js
    - /hacsfiles/Bubble-Card/bubble-pop-up-fix.js

# HTTP settings for when behind a reverse proxy
http:
  ip_ban_enabled: true
  use_x_forwarded_for: true
  trusted_proxies:
    - "10.0.0.0/8"
    - "172.16.0.0/12"
    - "192.168.0.0/16"

auth_header:
  username_header: X-ak-hass-user
  debug: true

openid:
  client_id: !secret ha_oidc_client_id
  client_secret: !secret ha_oidc_client_secret
  configure_url: "https://sso.pc-tips.se/application/o/home-assistant/.well-known/openid-configuration"
  username_field: preferred_username
  scope: "openid profile email"
  block_login: false
  openid_text: "Login with OpenID / OAuth2"

automation: !include automations.yaml
script: !include scripts.yaml
scene: !include scenes.yaml


## Components ##
powercalc: !include components/powercalc.yaml
wake_on_lan:
swedish_calendar:
spotcast: !include components/spotcast.yaml

## Conf##
input_boolean: !include conf/input_boolean.yaml
input_number: !include conf/input_number.yaml
light: !include conf/light.yaml
sensor: !include conf/sensors.yaml
template: !include conf/templates.yaml
multiscrape: !include conf/scrape.yaml
intent_script: !include conf/intent_script.yaml
input_select: !include conf/input_select.yaml
group: !include conf/groups.yaml
binary_sensor: !include conf/binary_sensor.yaml
input_datetime: !include conf/input_datetime.yaml
notify: !include conf/notify.yaml
alert: !include conf/alert.yaml
switch: !include conf/switch.yaml



bluetooth:
## Recorder ##
recorder:
  purge_keep_days: 10
  commit_interval: 5
  include:
    domains:
      - sensor
      - switch
      - media_player
      - light
      - binary_sensor
      - cover
      - remote
    entity_globs:
      - device_tracker.wilmisen_*
      - device_tracker.samsung_s21_*
  exclude:
    entities:
      - sensor.date
      - sensor.time
      - sensor.date_time
    event_types:
      - browser_mod
    entity_globs:
      - input_number.flux_dum_*
      - sensor.watchman_*

## Logger ##
logger:
  default: critical
  logs:
    # log level for HA core
    homeassistant.core: warning
    # log level for MQTT integration
    homeassistant.components.mqtt: warning
## history ##
history:
  include:
    domains:
      - sensor
      - switch
      - media_player
      - light
      - binary_sensor
      - cover

  exclude:
    entities:
      - sensor.date
      - sensor.time
      - sensor.date_time

# Specifies media source directory
homeassistant:
  media_dirs:
    local: /media
  latitude: !secret zone_home_latitude
  longitude: !secret zone_home_longitude
  elevation: !secret zone_home_elevation
  unit_system: metric
  temperature_unit: C
  time_zone: Europe/Stockholm
  language: en
  country: SE
  currency: SEK
## Lovelace Config ##
lovelace:
  mode: storage
